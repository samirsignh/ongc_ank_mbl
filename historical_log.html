
<!DOCTYPE html>
<html lang="en">

  
<!-- Mirrored from www.bootstrapget.com/demos/templatemonster/medicare-admin-dashboard/form-inputs.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 16 Sep 2024 17:59:06 GMT -->
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ONGC :: Ankleshwar</title>

    <!-- Meta -->
    <meta name="description" content="Marketplace for Bootstrap Admin Dashboards">
    <meta name="author" content="Bootstrap Gallery">
    <link rel="canonical" href="https://www.bootstrap.gallery/">
    <meta property="og:url" content="https://www.bootstrap.gallery/">
    <meta property="og:title" content="Admin Templates - Dashboard Templates | Bootstrap Gallery">
    <meta property="og:description" content="Marketplace for Bootstrap Admin Dashboards">
    <meta property="og:type" content="Website">
    <meta property="og:site_name" content="Bootstrap Gallery">
    <link rel="shortcut icon" href="assets/images/icons/logo.png">

    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.1/css/all.min.css">

    <!-- *************
		************ CSS Files *************
	************* -->
    <link rel="stylesheet" href="assets/fonts/remix/remixicon.css">
    <link rel="stylesheet" href="assets/css/main.min.css">
    <link rel="stylesheet" type="text/css" href="assets/customecss/dashboard.css">
    <link href="assets/local/select2/css/select2.min.css" rel="stylesheet" type="text/css" />

    <!-- *************
		************ Vendor Css Files *************
	************ -->

    <!-- Scrollbar CSS -->
    <link rel="stylesheet" href="assets/vendor/overlay-scroll/OverlayScrollbars.min.css">

    <style type="text/css">
      table thead tr th{
        background-color: #ecf3f9ed !important;
      }
      .select2-selection.select2-selection--single{
        height: 35px !important;
      }
      .select2-selection__rendered{
        margin-top: 2px;
      }
      .select2-container--default .select2-selection--single .select2-selection__arrow{
        top: 5px;
        right: 8px;
      }
    </style>

  </head>

  <body>

    <!-- Page wrapper starts -->
    <div class="page-wrapper">

      <!-- App header starts -->
      <div class="app-header d-flex align-items-center">

        <!-- Toggle buttons starts -->
        <div class="d-flex">
          <button class="toggle-sidebar">
            <i class="ri-menu-line"></i>
          </button>
          <button class="pin-sidebar">
            <i class="ri-menu-line"></i>
          </button>
        </div>
        <!-- Toggle buttons ends -->

        <!-- App brand starts -->
        <div class="app-brand ms-3">
          <a href="index.html" class="d-lg-block d-none">
            <img src="assets/images/icons/logo.png" class="logo">
          </a>
        </div>
        <!-- App brand ends -->

        <!-- App header actions starts -->
        <div class="header-actions">

          <!-- Header user settings starts -->
          <div class="dropdown ms-2">
            <a id="userSettings" class="dropdown-toggle d-flex align-items-center" href="#!" role="button"
              data-bs-toggle="dropdown" aria-expanded="false">
              <div class="avatar-box"><i class="fa-solid fa-user"></i></div>
            </a>
            <div class="dropdown-menu dropdown-menu-end shadow-lg">
              <div class="px-3 py-2">
                <h6 class="m-0" id="logedin_user"></h6>
              </div>
              <div class="mx-3 my-2 d-grid">
                <a href="javascript:;" onclick="logoutSession()" class="btn btn-danger">Logout</a>
              </div>
            </div>
          </div>
          <!-- Header user settings ends -->

        </div>
        <!-- App header actions ends -->

      </div>
      <!-- App header ends -->

      <!-- Main container starts -->
      <div class="main-container">

        <!-- Sidebar wrapper starts -->
        <nav id="sidebar" class="sidebar-wrapper">

          <!-- Sidebar menu starts -->
          <div class="sidebarMenuScroll">
            <ul class="sidebar-menu">
              <li class="active current-page">
                <a href="main_dashboard.html">
                  <i class="ri-home-6-line"></i>
                  <span class="menu-text">Dashboard</span>
                </a>
              </li>
              <li class="treeview">
                <a href="#!">
                  <i class="ri-bar-chart-line"></i>
                  <span class="menu-text">Rports</span>
                </a>
                <ul class="treeview-menu">
                  <li>
                    <a href="historical_log.html">Historical Reports</a>
                  </li>
                  <li>
                    <a href="alert_log_report.html">Alert Report</a>
                  </li>
                  <li>
                    <a href="historical_graph.html">Historical Graph Report</a>
                  </li>
                </ul>
              </li>
            </ul>
          </div>
          <!-- Sidebar menu ends -->
        </nav>
        <!-- Sidebar wrapper ends -->

        <!-- App container starts -->
        <div class="app-container">

          <!-- App hero header starts -->
          <div class="app-hero-header d-flex align-items-center">

            <!-- Breadcrumb starts -->
            <ol class="breadcrumb">
              <li class="breadcrumb-item">
                <i class="ri-home-8-line lh-1 pe-3 me-3 border-end"></i>
                <a href="#">Home</a>
              </li>
              <li class="breadcrumb-item text-primary" aria-current="page">
                Single Dashboard
              </li>
              <li class="breadcrumb-item text-primary" aria-current="page">
                Historical Report
              </li>
            </ol>
            <!-- Breadcrumb ends -->

          </div>
          <!-- App Hero header ends -->

          <!-- App body starts -->
          <div class="app-body">

            <!-- Row starts -->
            <div class="row gx-3">
              <div class="col-sm-12">
                <div class="card mb-3">
                  <div class="card-header" style="margin-bottom: -25px;">
                    <h5 class="card-title" style="font-family: sans-serif;font-weight: 700;">
                     Historical Report
                     <a href="main_dashboard.html" class="btn btn-sm btn-primary" style="float: right;">Back</a>
                    </h5>
                  </div>
                  <div class="card-body">
                    <div class="alert-filters">
                      <div class="row">
                        <div class="col-md-12 pt-1">
                          <div class="form-group">
                            <label><strong>Well Name</strong></label>
                            <select class="form-control select2" onchange="get_historical_report_list()" name="well_id" id="well_id">
                              
                            </select>
                          </div>
                        </div>
                        <div class="col-md-12 pt-1">
                          <div class="form-group">
                            <label><strong>From Date</strong></label>
                            <input type="date" onchange="get_historical_report_list(); get_installation_date()" name="from_date" id="from_date" class="form-control">
                          </div>
                        </div>
                        <div class="col-md-12 pt-1">
                          <div class="form-group">
                            <label><strong>To Date</strong></label>
                            <input type="date" onchange="get_historical_report_list(); get_installation_date()" name="to_date" id="to_date" class="form-control">
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="row gx-3">
              <div class="col-sm-12">
                <div class="card mb-3">
                  <div class="card-body" style="padding: 8px 8px;">
                    <!-- Table starts -->
                    <div class="table-outer">
                      <div class="table-responsive">
                        <table class="table m-0 align-middle">
                          <thead>
                            <tr>
                              <th class="pb-0" colspan="15"><h5 class="text-center" style="font-size: 17px !important;">IOT Based Real Time Well Monitoring System ONGC,Ankleshwar Asset</h5></th>
                            </tr>
                            <tr>
                              <th colspan="15"><h6 class="text-center">Device Historical Report as on <span id="report_from_date"></span> To <span id="report_to_date"></span></h6></th>
                            </tr>
                            <tr>
                              <th>#</th>
                              <th>Well Name</th>
                              <th>IMEI No</th>
                              <th>Last Log D/T</th>
                              <th>GIP</th>
                              <th>CHP</th>
                              <th>THP</th>
                              <th>ABP</th>
                              <th>THT</th>
                              <th>Battery(V)</th>
                              <th>SF1-solenide</th>
                              <th>Target Time</th>
                              <th>On Time</th>
                              <th>OFf Time</th>
                            </tr>
                          </thead>
                          <tbody id="historical_log_report_table">
                            
                          </tbody>
                        </table>
                      </div>
                    </div>
                    <!-- Table ends -->
                  </div>
                </div>
              </div>
            </div>

            <!-- Row ends -->

          </div>
          <!-- App body ends -->

          <!-- App footer starts -->
          <div class="app-footer bg-white">
            <span>© Copyright, Iotas Solutions Pvt Ltd, All Right Reserve. </span>
          </div>
          <!-- App footer ends -->

        </div>
        <!-- App container ends -->

      </div>
      <!-- Main container ends -->

    </div>
    <!-- Page wrapper ends -->

    <!-- *************
			************ JavaScript Files *************
		************* -->
    <!-- Required jQuery first, then Bootstrap Bundle JS -->
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/moment.min.js"></script>

    <!-- *************
			************ Vendor Js Files *************
		************* -->
    <script type="text/javascript" src="inc/paths.js"></script>
    <script src="assets/local/select2/js/select2.min.js"></script>
    <!-- Overlay Scroll JS -->
    <script src="assets/vendor/overlay-scroll/jquery.overlayScrollbars.min.js"></script>
    <script src="assets/vendor/overlay-scroll/custom-scrollbar.js"></script>

    <!-- Custom JS files -->
    <script src="assets/js/custom.js"></script>
    <!-- <script src="inc/sidebarmenu.html"></script> -->

    <script type="text/javascript">

      let sessionUserData = localStorage.getItem('userData');
      let userData = JSON.parse(sessionUserData);

      let historical_well_id = localStorage.getItem('historicalWellId');

      $(document).ready(function(){
        $(".select2").select2();

        $.ajax({
            url: api_path + "Area_Dashboard/WellList_forDashboard",
            type: "POST",
            data: {
                company_id: userData.company_id,
                user_id: userData.user_id,
            },
            headers: {
                "x-api-key": "Qm0Lkq9m8JRiGPxO56HNmD7pIVSGzJje"
            },
            success:(resp)=>{
              if(resp.response_code == 200){
                if(resp.data.length > 0){
                  $("#well_id").html(`<option value="">-select-</option>`);
                  $.each(resp.data, (i,v)=>{
                      let selected = v.well_id == historical_well_id ? "selected" : "";
                      $("#well_id").append(`<option value="${v.well_id}" ${selected}>${v.well_name}</option>`);
                  });
                }else{
                  $("#well_id").html(`<option value="">-select-</option>`)
                }
              }
              get_historical_report_list();
            }
        });

      });

      const graph_date_time = ()=>{
          const now = new Date();
          function formatDateToLocalInput(date) {
              const year = date.getFullYear();
              const month = String(date.getMonth() + 1).padStart(2, '0'); // Months are 0-based
              const day = String(date.getDate()).padStart(2, '0');
              const hours = String(date.getHours()).padStart(2, '0');
              const minutes = String(date.getMinutes()).padStart(2, '0');
              return `${year}-${month}-${day}`;
          }
          const toDateValue = formatDateToLocalInput(now);
          const fromDateValue = formatDateToLocalInput(new Date(now.getTime()));
          document.getElementById('from_date').value = fromDateValue;
          document.getElementById('to_date').value = toDateValue;
      }

      function get_installation_date()
      {
          var from_date = $('#from_date').val();
          var to_date = $('#to_date').val();

          f_from_date = moment(from_date);
          t_to_date = moment(to_date);

          if(f_from_date.isValid())
          {
              $('#report_from_date').text(f_from_date.format("DD-MM-YYYY"));
              $('#to').show();
          }else{
              $('#report_from_date').text('');
          }

          if(t_to_date.isValid())
          {
              $('#report_to_date').text(t_to_date.format("DD-MM-YYYY"));
              $('#to').show();
          }else{
              $('#report_to_date').text('');
          }

          // Additional check to show only the 'from date' if from_date == to_date
            if (f_from_date.isValid() && t_to_date.isValid() && f_from_date.isSame(t_to_date, 'day')) {
              $('#report_to_date').text('');
              $('#to').hide();

            }
      }

      const get_historical_report_list = ()=>{

        $("#historical_log_report_table").html(`<tr><td colspan="15" style="text-align:center;color:grey;"> Please wait......loading!</td></tr>`);
        $.ajax({
            url: api_path + "Historical_Data/Historial_data_Mis_Report",
            type: "POST",
            data: {
                well_id: $("#well_id").val(),
                from_date: $("#from_date").val(),
                to_date: $("#to_date").val(),
                user_id: userData.user_member_id,
            },
            headers: {
                "x-api-key": "Qm0Lkq9m8JRiGPxO56HNmD7pIVSGzJje"
            },
            success:(resp)=>{
              if(resp.response_code == 200){
                if(resp.data.length > 0){
                  $("#historical_log_report_table").html(``);
                  $.each(resp.data, (i,v) =>{
                      var lastDateTime  = v.Log_Date_Time != null ? moment(v.Log_Date_Time).format('DD-MM-YYYY h:mm:ss a') :"-";
                      $("#historical_log_report_table").append(`<tr style="font-size: 11px;">
                              <td>${i + 1}</td>
                              <td>${v.well_name ? v.well_name : "-"}</td>
                              <td>${v.imei_no ? v.imei_no : "-"}</td>
                              <td style="min-width: 135px;">${lastDateTime}</td>
                              <td>${v.PS_1_GIP ? v.PS_1_GIP : "-"}</td>
                              <td>${v.PS_2_CHP ? v.PS_2_CHP : "-"}</td>
                              <td>${v.PS_3_THP ? v.PS_3_THP : "-"}</td>
                              <td>${v.PS_4_ABP ? v.PS_4_ABP : "-"}</td>
                              <td>${v.FLTP_1_Temp ? v.FLTP_1_Temp : "-"}</td>
                              <td>${v.Battery_Voltage ? v.Battery_Voltage : "-"}</td>
                              <td>${v.SF_1_solenide ? v.SF_1_solenide : "-"}</td>
                              <td>${v.TRGT_Time ? v.TRGT_Time : "-"}</td>
                              <td>${v.ON_Time ? v.ON_Time : "-"}</td>
                              <td>${v.Off_Time ? v.Off_Time : "-"}</td>
                            </tr>`);
                  });
                }else{
                  $("#historical_log_report_table").html(`<tr><td colspan="15" style="text-align:center;color:red;"> No record found!</td></tr>`);
                }
              }
            }
        });
      }

      $(document).ready(function() {
        let sessionUserData = localStorage.getItem('userData');
        let userData = JSON.parse(sessionUserData);
        if(userData.user_type == 1){
          $("#logedin_user").html("Super Admin");
        }else if(userData.user_type == 2){
          $("#logedin_user").html(userData.company_name);
        }else if(userData.user_type == 3){
          $("#logedin_user").html(userData.user_full_name);
        }
      });

      const logoutSession = ()=>{
        localStorage.clear()
        window.location.href = 'login.html';
      }

      graph_date_time();
      get_installation_date();
    </script>

  </body>


<!-- Mirrored from www.bootstrapget.com/demos/templatemonster/medicare-admin-dashboard/form-inputs.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 16 Sep 2024 17:59:06 GMT -->
</html>