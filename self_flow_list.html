
<!DOCTYPE html>
<html lang="en">

  
<!-- Mirrored from www.bootstrapget.com/demos/templatemonster/medicare-admin-dashboard/form-inputs.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 16 Sep 2024 17:59:06 GMT -->
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ONGC :: Ankleshwar</title>

    <!-- Meta -->
    <meta name="description" content="Marketplace for Bootstrap Admin Dashboards">
    <meta name="author" content="Bootstrap Gallery">
    <link rel="canonical" href="https://www.bootstrap.gallery/">
    <meta property="og:url" content="https://www.bootstrap.gallery/">
    <meta property="og:title" content="Admin Templates - Dashboard Templates | Bootstrap Gallery">
    <meta property="og:description" content="Marketplace for Bootstrap Admin Dashboards">
    <meta property="og:type" content="Website">
    <meta property="og:site_name" content="Bootstrap Gallery">
    <link rel="shortcut icon" href="assets/images/icons/logo.png">

    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.1/css/all.min.css">

    <!-- *************
		************ CSS Files *************
	************* -->
    <link rel="stylesheet" href="assets/fonts/remix/remixicon.css">
    <link rel="stylesheet" href="assets/css/main.min.css">
    <link rel="stylesheet" type="text/css" href="assets/customecss/dashboard.css">

    <!-- *************
		************ Vendor Css Files *************
	************ -->

    <!-- Scrollbar CSS -->
    <link rel="stylesheet" href="assets/vendor/overlay-scroll/OverlayScrollbars.min.css">

    <style type="text/css">
      table thead tr th{
        background-color: #ecf3f9ed !important;
      }
      .download-btns{
        float: right;
        font-size: 24px;
        padding-right: 8px;
        color: saddlebrown;
      }
    </style>

  </head>

  <body>

    <!-- Page wrapper starts -->
    <div class="page-wrapper">

      <!-- App header starts -->
      <div class="app-header d-flex align-items-center">

        <!-- Toggle buttons starts -->
        <div class="d-flex">
          <button class="toggle-sidebar">
            <i class="ri-menu-line"></i>
          </button>
          <button class="pin-sidebar">
            <i class="ri-menu-line"></i>
          </button>
        </div>
        <!-- Toggle buttons ends -->

        <!-- App brand starts -->
        <div class="app-brand ms-3">
          <a href="index.html" class="d-lg-block d-none">
            <img src="assets/images/icons/logo.png" class="logo">
          </a>
        </div>
        <!-- App brand ends -->

        <!-- App header actions starts -->
        <div class="header-actions">

          <!-- Header user settings starts -->
          <div class="dropdown ms-2">
            <a id="userSettings" class="dropdown-toggle d-flex align-items-center" href="#!" role="button"
              data-bs-toggle="dropdown" aria-expanded="false">
              <div class="avatar-box"><i class="fa-solid fa-user"></i></div>
            </a>
            <div class="dropdown-menu dropdown-menu-end shadow-lg">
              <div class="px-3 py-2">
                <h6 class="m-0">Admin</h6>
              </div>
              <div class="mx-3 my-2 d-grid">
                <a href="login.html" class="btn btn-danger">Logout</a>
              </div>
            </div>
          </div>
          <!-- Header user settings ends -->

        </div>
        <!-- App header actions ends -->

      </div>
      <!-- App header ends -->

      <!-- Main container starts -->
      <div class="main-container">

        <!-- Sidebar wrapper starts -->
        <nav id="sidebar" class="sidebar-wrapper">

          <!-- Sidebar menu starts -->
          <div class="sidebarMenuScroll">
            <ul class="sidebar-menu">
              <li class="active current-page">
                <a href="main_dashboard.html">
                  <i class="ri-home-6-line"></i>
                  <span class="menu-text">Dashboard</span>
                </a>
              </li>
              <li class="treeview">
                <a href="#!">
                  <i class="ri-bar-chart-line"></i>
                  <span class="menu-text">Rports</span>
                </a>
                <ul class="treeview-menu">
                  <li>
                    <a href="historical_log.html">Historical Reports</a>
                  </li>
                  <li>
                    <a href="alert_log_report.html">Alert Report</a>
                  </li>
                  <li>
                    <a href="historical_graph.html">Historical Graph Report</a>
                  </li>
                </ul>
              </li>
            </ul>
          </div>
          <!-- Sidebar menu ends -->
        </nav>
        <!-- Sidebar wrapper ends -->

        <!-- App container starts -->
        <div class="app-container">

          <!-- App hero header starts -->
          <div class="app-hero-header d-flex align-items-center">

            <!-- Breadcrumb starts -->
            <ol class="breadcrumb">
              <li class="breadcrumb-item">
                <i class="ri-home-8-line lh-1 pe-3 me-3 border-end"></i>
                <a href="#">Home</a>
              </li>
              <li class="breadcrumb-item text-primary" aria-current="page">
                Dashboard
              </li>
              <li class="breadcrumb-item text-primary" aria-current="page">
                Self Flow Wells
              </li>
            </ol>
            <!-- Breadcrumb ends -->

          </div>
          <!-- App Hero header ends -->

          <!-- App body starts -->
          <div class="app-body">

            <!-- Row starts -->
            <div class="row gx-3">
              <div class="col-sm-12">
                <div class="card mb-3">
                  <div class="card-header">
                    <h5 class="card-title" style="font-family: sans-serif;font-weight: 700;">
                     Self Flow Wells List
                      <a href="main_dashboard.html" class="btn btn-sm btn-primary" style="float: right;">Back</a>
                    </h5>
                  </div>
                  <div class="card-body">

                    <!-- Table starts -->
                    <div class="table-outer">
                      <div class="table-responsive">
                        <table class="table m-0 align-middle">
                          <thead>
                            <tr>
                              <th>#</th>
                              <th>Area</th>
                              <th>Site</th>
                              <th>Well Name</th>
                              <th>Well Status</th>
                              <th style="min-width: 80px !important;">Last Updated Time</th>
                              <th>GIP</th>
                              <th>CHP</th>
                              <th>THP</th>
                              <th>ABP</th>
                              <th>THT</th>
                              <th>Battery(V)</th>
                              <th>Target Time</th>
                              <th>On Time</th>
                              <th>OFf Time</th>
                            </tr>
                          </thead>
                          <tbody id="self_flow_wells_tables" style="font-size: 12px !important;">
                            
                          </tbody>
                        </table>
                      </div>
                    </div>
                    <!-- Table ends -->

                  </div>
                </div>
              </div>
            </div>

            <!-- Row ends -->

          </div>
          <!-- App body ends -->

          <!-- App footer starts -->
          <div class="app-footer bg-white">
            <span>Â© Copyright, Iotas Solutions Pvt Ltd, All Right Reserve. </span>
          </div>
          <!-- App footer ends -->

        </div>
        <!-- App container ends -->

      </div>
      <!-- Main container ends -->

    </div>
    <!-- Page wrapper ends -->

    <!-- *************
			************ JavaScript Files *************
		************* -->
    <!-- Required jQuery first, then Bootstrap Bundle JS -->
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/moment.min.js"></script>

    <!-- *************
			************ Vendor Js Files *************
		************* -->
    <script type="text/javascript" src="inc/paths.js"></script>

    <!-- Overlay Scroll JS -->
    <script src="assets/vendor/overlay-scroll/jquery.overlayScrollbars.min.js"></script>
    <script src="assets/vendor/overlay-scroll/custom-scrollbar.js"></script>

    <!-- Custom JS files -->
    <script src="assets/js/custom.js"></script>
    <!-- <script src="inc/sidebarmenu.html"></script> -->

    <script type="text/javascript">
      let sessionWellIds = localStorage.getItem('wellSessionIds');
      let wellIds = JSON.parse(sessionWellIds);

      let sessionUserData = localStorage.getItem('userData');
      let userData = JSON.parse(sessionUserData);

      const selfFlowWellList = ()=>{
        $.ajax({
            url: api_path + "Area_Dashboard/get_self_flow_well_list",
            type: "POST",
            data: {
                // Include any required data here, for example:
                area_id: wellIds?.area_id,
                site_id: wellIds?.site_id,
                well_type: 2,
                well_id: wellIds?.well_id,
                assets_id: userData.assets_id,
                user_id: userData.user_id,
            },
            headers: {
                "x-api-key": "Qm0Lkq9m8JRiGPxO56HNmD7pIVSGzJje"
            },
            success: function (resp) {
                console.log("Response", resp);
                if(resp.response_code == 200){
                  if(resp.data.length > 0){
                    $("#self_flow_wells_tables").html(``);
                    $.each(resp.data, (i,v)=>{

                        var last_updated_time  = v.Log_Date_Time != null ? moment(v.Log_Date_Time).format('DD-MM-YYYY h:mm:ss a') :"-";

                        var flag_status = v.flag_status;
                        var lastLogDateTime = new Date(v.Log_Date_Time);
                        var currentTime = new Date();
                        var timeDifference = (currentTime - lastLogDateTime) / (1000 * 60);

                        var rtms_status = '';
                        if(timeDifference < 120)
                          {
                            if(flag_status == 0)
                            {
                                rtms_status = `<button class="btn btn-success btn-sm" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Accepted" style="padding: 0px 5px;">
                                      Flowing
                                  </button>`;
                            }else if(flag_status == 1){
                                rtms_status = `<button class="btn btn-warning btn-sm" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Accepted" style="padding: 0px 5px;">
                                      Non-Flowing
                                  </button>`;
                            }
                        }else{
                              rtms_status = `<button class="btn btn-danger btn-sm" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Accepted" style="padding: 0px 5px;">
                                          Offline
                                      </button>`;
                            }

                        $("#self_flow_wells_tables").append(`<tr>
                            <td>${i + 1}</td>
                            <td>${v.area_name}</td>
                            <td>${v.well_site_name}</td>
                            <td><a href="javascript:;" onclick="self_flow_to_single_dashboard_details(this.id)" id="${v.well_id}|${v.site_id}" style="color: blue;font-weight: 700;">${v.well_name}</a></td>
                            <td>${rtms_status}</td>
                            <td>${last_updated_time}</td>
                            <td>${v.PS_1_GIP ? v.PS_1_GIP : "-"}</td>
                            <td>${v.PS_2_CHP ? v.PS_2_CHP : "-"}</td>
                            <td>${v.PS_3_THP ? v.PS_3_THP : "-"}</td>
                            <td>${v.PS_4_ABP ? v.PS_4_ABP : "-"}</td>
                            <td>${v.FLTP_1_Temp ? v.FLTP_1_Temp : "-"}</td>
                            <td>${v.Battery_Voltage ? v.Battery_Voltage : "-"}</td>
                            <td>${v.TRGT_Time ? v.TRGT_Time : "-"}</td>
                            <td>${v.ON_Time ? v.ON_Time : "-"}</td>
                            <td>${v.Off_Time ? v.Off_Time : "-"}</td>
                          </tr>`);
                    });
                  }else{
                    $("#self_flow_wells_tables").html(`<tr><td colspan="18"> No record found!</td></tr>`);
                  }
                }
            },
            error: function (error) {
                console.error("Error", error);
            }
        });
      }

      const exportSelfflowWellReport = () => {
          let table = document.getElementById("self_flow_wells_tables"); // Replace with your table's ID
          let rows = table.querySelectorAll("tr");
          let csvContent = [];

          // Iterate over rows to extract data
          rows.forEach((row) => {
              let cols = row.querySelectorAll("th, td"); // Include table headers and data
              let rowData = [];
              cols.forEach((col) => rowData.push(col.innerText.trim())); // Get cell text
              csvContent.push(rowData.join(",")); // Join cell data with commas
          });

          // Convert array to CSV string
          let csvString = csvContent.join("\n");

          // Create a Blob from the CSV
          let blob = new Blob([csvString], { type: "text/csv" });

          // Create a download link
          let link = document.createElement("a");
          link.href = URL.createObjectURL(blob);
          link.download = "Self_flow_Wells_Report.csv"; // Filename
          link.style.display = "none";

          // Append link to body and trigger click
          document.body.appendChild(link);
          link.click();
          document.body.removeChild(link);
      };

      const self_flow_to_single_dashboard_details = (datas)=>{
        let [well_id, site_id] = datas.split("|");
        let well_siteId = [];
        well_siteId = {
            well_id: well_id,
            site_id: site_id,
        };
        localStorage.setItem('setWellSiteId',JSON.stringify(well_siteId));
        window.location.href = 'single_well_dashboard.html';
      }

      selfFlowWellList();

    </script>

  </body>


<!-- Mirrored from www.bootstrapget.com/demos/templatemonster/medicare-admin-dashboard/form-inputs.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 16 Sep 2024 17:59:06 GMT -->
</html>