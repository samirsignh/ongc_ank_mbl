
<!DOCTYPE html>
<html lang="en">

  
<!-- Mirrored from www.bootstrapget.com/demos/templatemonster/medicare-admin-dashboard/form-inputs.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 16 Sep 2024 17:59:06 GMT -->
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ONGC :: Ankleshwar</title>

    <!-- Meta -->
    <meta name="description" content="Marketplace for Bootstrap Admin Dashboards">
    <meta name="author" content="Bootstrap Gallery">
    <link rel="canonical" href="https://www.bootstrap.gallery/">
    <meta property="og:url" content="https://www.bootstrap.gallery/">
    <meta property="og:title" content="Admin Templates - Dashboard Templates | Bootstrap Gallery">
    <meta property="og:description" content="Marketplace for Bootstrap Admin Dashboards">
    <meta property="og:type" content="Website">
    <meta property="og:site_name" content="Bootstrap Gallery">
    <link rel="shortcut icon" href="assets/images/icons/logo.png">

    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.1/css/all.min.css">

    <!-- *************
		************ CSS Files *************
	************* -->
    <link rel="stylesheet" href="assets/fonts/remix/remixicon.css">
    <link rel="stylesheet" href="assets/css/main.min.css">
    <link rel="stylesheet" type="text/css" href="assets/customecss/dashboard.css">

    <!-- *************
		************ Vendor Css Files *************
	************ -->
    <link rel="stylesheet" type="text/css" href="assets/customecss/single_dashboard.css">
    <!-- Scrollbar CSS -->
    <link rel="stylesheet" href="assets/vendor/overlay-scroll/OverlayScrollbars.min.css">
    <link href="assets/local/select2/css/select2.min.css" rel="stylesheet" type="text/css" />
    <style type="text/css">
      .select2-selection.select2-selection--single{
        height: 40px !important;
      }
      .select2-selection__rendered{
        margin-top: 6px;
      }
      .select2-container--default .select2-selection--single .select2-selection__arrow{
        top: 8px;
        right: 8px;
      }
      .breadcrumb-item+.breadcrumb-item{
        padding-left: 0px !important;
      }
      .well-count-head-1 {
          background: #c7cacd;
          font-size: 20px;
          font-weight: 700;
          padding: 0px 10px;
      }
    </style>
  </head>

  <body>

    <!-- Page wrapper starts -->
    <div class="page-wrapper">

      <!-- App header starts -->
      <div class="app-header d-flex align-items-center">

        <!-- Toggle buttons starts -->
        <div class="d-flex">
          <button class="toggle-sidebar">
            <i class="ri-menu-line"></i>
          </button>
          <button class="pin-sidebar">
            <i class="ri-menu-line"></i>
          </button>
        </div>
        <!-- Toggle buttons ends -->

        <!-- App brand starts -->
        <div class="app-brand ms-3">
          <a href="index.html" class="d-lg-block d-none">
            <img src="assets/images/icons/logo.png" class="logo">
          </a>
        </div>
        <!-- App brand ends -->

        <!-- App header actions starts -->
        <div class="header-actions">

          <!-- Header user settings starts -->
          <div class="dropdown ms-2">
            <a id="userSettings" class="dropdown-toggle d-flex align-items-center" href="#!" role="button"
              data-bs-toggle="dropdown" aria-expanded="false">
              <div class="avatar-box"><i class="fa-solid fa-user"></i></div>
            </a>
            <div class="dropdown-menu dropdown-menu-end shadow-lg">
              <div class="px-3 py-2">
                <h6 class="m-0">James Bruton</h6>
              </div>
              <div class="mx-3 my-2 d-grid">
                <a href="login.html" class="btn btn-danger">Logout</a>
              </div>
            </div>
          </div>
          <!-- Header user settings ends -->

        </div>
        <!-- App header actions ends -->

      </div>
      <!-- App header ends -->

      <!-- Main container starts -->
      <div class="main-container">

        <!-- Sidebar wrapper starts -->
        <nav id="sidebar" class="sidebar-wrapper">

          <!-- Sidebar menu starts -->
          <div class="sidebarMenuScroll">
            <ul class="sidebar-menu">
              <li class="active current-page">
                <a href="main_dashboard.html">
                  <i class="ri-home-6-line"></i>
                  <span class="menu-text">Dashboard</span>
                </a>
              </li>
              <li class="treeview">
                <a href="#!">
                  <i class="ri-bar-chart-line"></i>
                  <span class="menu-text">Rports</span>
                </a>
                <ul class="treeview-menu">
                  <li>
                    <a href="historical_log.html">Historical Reports</a>
                  </li>
                  <li>
                    <a href="alert_log_report.html">Alert Report</a>
                  </li>
                  <li>
                    <a href="historical_graph.html">Historical Graph Report</a>
                  </li>
                </ul>
              </li>
            </ul>
          </div>
          <!-- Sidebar menu ends -->
        </nav>
        <!-- Sidebar wrapper ends -->

        <!-- App container starts -->
        <div class="app-container">

          <!-- App hero header starts -->
          <div class="app-hero-header d-flex align-items-center">

            <!-- Breadcrumb starts -->
            <ol class="breadcrumb">
              <li class="breadcrumb-item">
                <i class="ri-home-8-line lh-1 pe-3 me-3 border-end"></i>
                <a href="#">Home</a>
              </li>
              <li class="breadcrumb-item text-primary" aria-current="page">
                Dashboard
              </li>
              <li class="breadcrumb-item text-primary" aria-current="page">
                Single Dashboard
              </li>
            </ol>
            <!-- Breadcrumb ends -->

          </div>
          <!-- App Hero header ends -->

          <!-- App body starts -->
          <div class="app-body">
            <div class="app-hero-header d-flex align-items-center">
                <!-- Breadcrumb starts -->
                <ol class="breadcrumb">
                  <li class="breadcrumb-item">
                    <span id="areaName"></span>
                  </li>
                  <li class="breadcrumb-item text-primary" aria-current="page">
                    <span id="siteName"></span>
                  </li>
                  <li class="breadcrumb-item text-primary" aria-current="page">
                    <span id="wellTypeName"></span>
                  </li>
                  <li class="breadcrumb-item text-primary" aria-current="page">
                    <span id="wellName"></span>
                  </li>
                </ol>
                <div class="back-btns">
                    <a href="main_dashboard.html" class="btn btn-primary btn-sm" style="margin-left: 35px;">Back</a>
                </div>
                <!-- Breadcrumb ends -->
              </div>
            <!-- Row starts -->
            <div class="row gx-3">
              <div class="col-lg-12 col-sm-12 col-12">
                <div class="card mb-3">
                  <div class="card-body filter-card">
                    <div class="m-0">
                      <label class="form-label" for="abc4"><strong>Area</strong></label>
                      <select class="form-control select2" onchange="getSiteList();initMap_mbl();" id="area_id" name="area_id" aria-label="Default select example">
                      </select>
                    </div>

                    <div class="m-0 pt-2">
                      <label class="form-label" for="abc4"><strong>Installation/Site</strong></label>
                      <select class="form-control select2" id="site_id" onchange="getWellNames();" name="site_id" aria-label="Default select example">
                      </select>
                    </div>

                    <div class="m-0 pt-2">
                      <label class="form-label" for="abc4"><strong>Well Type</strong></label>
                      <select class="form-control select2" id="well_type" onchange="initMap_mbl();" name="well_type" aria-label="Default select example">
                      </select>
                    </div>

                    <div class="m-0 pt-2">
                      <label class="form-label" for="abc4"><strong>Well Name</strong></label>
                      <select class="form-control select2" id="well_id" name="well_id" onchange="initMap_mbl();alert_log_mbl();Get_Graph();getPresureDetails();" aria-label="Default select example">
                      </select>
                    </div>

                  </div>
                </div>
              </div>
            </div>

            <div class="row gx-3">
              <div class="col-lg-12 col-sm-12 col-12">
                <div class="card mb-3">
                  <div class="card-body">
                    <div class="pump-image" style="position: relative;">
                      <div class="sensor_one">
                          <img height="35" src="assets/images/icons/psr.png" alt="sensor-icon">
                          <div class="sensor_one_data">
                              <strong>THT : </strong> <span id="sensor-one-value"><span id="tht_image"></span></span>
                          </div>
                      </div>
                      <div class="sensor-two" id="sensortwo">
                          <img height="35" src="assets/images/icons/psr.png" alt="sensor-icon">
                          <div class="sensor_two_data">
                              <strong>THP : </strong> <span id="sensor-two-value"><span id="thp_image"></span>
                          </div>
                      </div>
                      <div class="sensor-two_one" id="sensortwoone">
                          <img height="35" src="assets/images/icons/psr.png" alt="sensor-icon">
                          <div class="sensor_two_data_two">
                              <strong>ABP : </strong> <span id="sensor-two-value"><span id="abp_image"></span>
                          </div>
                      </div>
                      <div class="sensor-three" id="sensorthree">
                          <img height="35" src="assets/images/icons/psr.png" alt="sensor-icon">
                          <div class="sensor_three_data">
                              <strong>CHP : </strong> <span id="sensor-three-value"><span id="chp_image"></span>
                          </div>
                      </div>
                      <div class="sensor-four" id="sensor_four">
                          <img height="35" src="assets/images/icons/psr.png" alt="sensor-icon">
                          <div class="sensor_four_data">
                              <strong>GIP : </strong> <span id="sensor-four-value"><span id="gip_image"></span>
                          </div>
                      </div>
                      <div class="well-status-badge">
                        <strong>Well Status :</strong> <span class="badge rounded-pill bg-dark" id="well_status" style="letter-spacing: 1px;text-transform: uppercase;"></span>
                      </div>
                      <img class="pump-motor-image" src="assets/images/icons/11.jpg" alt="pump-img">
                    </div>
                    <div id="projectbox">
                      <div class='battery'>
                        <div class='bar' data-power='10'></div>
                        <div class='bar' data-power='20'></div>
                        <div class='bar' data-power='30'></div>
                        <div class='bar' data-power='40'></div>
                        <div class='bar' data-power='50'></div>
                        <div class='bar' data-power='60'></div>
                        <div class='bar' data-power='70'></div>
                        <div class='bar' data-power='80'></div>
                        <div class='bar' data-power='90'></div>
                        <div class='bar' data-power='100'></div>
                      </div>
                    </div>
                    <div class="btry-title pt-1">
                       <strong class="fs-15">Battery : </strong><span id="battery_value" style="padding-right: 35px;">0 V</span>
                       <strong class="fs-15">Bean Size : </strong><span id="bean_size">W/B</span>
                    </div>
                    <div class="battery-parameters pt-3">
                      <table class="table-responsive table-bordered" style="width: 100%;">
                        <tbody class="fs-12">
                            <tr>
                                <th style="padding: 2px 8px;">On Time : </th>
                                <td style="padding: 2px 8px;"><span id="on_time"></span></td>

                                <th style="padding: 2px 8px;">Off Time : </th>
                                <td style="padding: 2px 8px;"><span id="off_time"></span></td>
                            </tr>
                            <tr>
                                <th style="padding: 2px 6px;">Next Cycle : </th>
                                <td style="padding: 2px 6px;"><span id="next_cycle"></span></td>

                                <th style="padding: 2px 6px;">Last On Time : </th>
                                <td style="padding: 2px 6px;"><span id="last_cycle"></span></td>
                            </tr>
                        </tbody>
                      </table>
                      <table class="table-responsive table-bordered mt-3" style="width: 100%;">
                        <tbody class="fs-12">
                            <tr style="background-color: #d0deeb;">
                                <th style="padding: 2px 6px;">Field Name</th>
                                <th style="padding: 2px 6px;">Daily Average</th>
                                <th style="padding: 2px 6px;">Monthly Average</th>
                            </tr>
                            <tr>
                                <th style="padding: 2px 6px;">GIP</th>
                                <td style="padding: 2px 6px;"><span id="gip_daily"></span></td>
                                <td style="padding: 2px 6px;"><span id="gip_monthly"></span></td>
                            </tr>
                            <tr>
                                <th style="padding: 2px 6px;">CHP</th>
                                <td style="padding: 2px 6px;"><span id="chp_daily"></span></td>
                                <td style="padding: 2px 6px;"><span id="chp_monthly"></span></td>
                            </tr>
                            <tr>
                                <th style="padding: 2px 6px;">THP</th>
                                <td style="padding: 2px 6px;"><span id="thp_daily"></span></td>
                                <td style="padding: 2px 6px;"><span id="thp_monthly"></span></td>
                            </tr>

                            <tr>
                                <th style="padding: 2px 6px;">ABP</th>
                                <td style="padding: 2px 6px;"><span id="abp_daily"></span></td>
                                <td style="padding: 2px 6px;"><span id="abp_monthly"></span></td>
                            </tr>
                            <tr>
                                <th style="padding: 2px 6px;">THT</th>
                                <td style="padding: 2px 6px;"><span id="tht_daily"></span></td>
                                <td style="padding: 2px 6px;"><span id="tht_monthly"></span></td>
                            </tr>
                        </tbody>
                      </table>
                      <table class="table-responsive table-bordered mt-2" style="width: 100%;">
                        <tbody class="fs-12">
                            <thead style="background-color: #d0deeb;">
                                <tr>
                                    <th class="fs-16 text-center" colspan="2" style="padding: 2px 10px;"><strong>RTMS STATUS</strong></th>
                                </tr>
                            </thead>
                            <tr>
                                <th style="padding: 2px 4px;">Status </th>
                                <td style="padding: 2px 4px;"><span id="rtms_status_text"></span> <span id="rtms_status_image"></span>
                                 </td>
                                
                            </tr>
                            <tr>
                                <th style="padding: 2px 4px;">Last Updated Time</th>
                                <td><span id="last_updated_datetime"></span></td>
                            </tr>
                        </tbody>
                      </table>
                      <table class="table-responsive table-bordered mt-2" style="width: 100%;">
                        <tbody class="fs-12">
                            <thead style="background-color: #d0deeb;">
                                <tr>
                                    <th class="fs-16 text-center" colspan="2" style="padding: 2px 10px;"><strong>RTMS DETAILS</strong></th>
                                </tr>
                            </thead>
                           
                            <tr>
                                <th style="padding: 2px 6px;">Device Name</th>
                                <td style="padding: 2px 6px;"><span id="device_name"></span></td>
                            </tr>
                            <tr>
                                <th style="padding: 2px 6px;">Imei No.</th>
                                <td style="padding: 2px 6px;"><span id="imei_no"></span></td>
                            </tr>
                        </tbody>
                      </table>
                      <div class="single-well-action-buttons pt-2">
                        <!-- <a href="#" data-bs-toggle="offcanvas" data-bs-target="#update_ietcc" aria-controls="update_ietcc" class="btn btn-outline-primary"> Update IETCC </a>
                        <a href="#" data-bs-toggle="offcanvas" data-bs-target="#flag_well" aria-controls="flag_well" class="btn btn-outline-primary"> Flag Well </a> -->
                        <a href="historical_log.html" class="btn btn-outline-primary"> Historical Log </a>
                        <a href="alert_log_report.html" class="btn btn-outline-primary"> Alert Log </a>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="row gx-3">
              <div class="col-sm-12">
                <div class="accordion mb-3" id="single_well_detailsAccordian">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="singlewelldetailsaccordians">
                      <button class="accordion-button" onclick="Get_Graph()" type="button" data-bs-toggle="collapse"
                        data-bs-target="#singlewell_details_accordians" aria-expanded="true"
                        aria-controls="singlewell_details_accordians">
                        <div class="name-tilte">
                          <h5 class="m-0">
                            Graph
                          </h5>
                        </div>
                      </button>
                    </h2>
                  <div id="singlewell_details_accordians" class="accordion-collapse collapse"
                      aria-labelledby="singlewelldetailsaccordians" data-bs-parent="#single_well_detailsAccordian">
                      <div class="accordion-body">
                        <div class="card-indicator-section">
                            <div class="row">
                              <div class="col-lg-12">
                                <div class="form-group">
                                  <label style="float: left;"><strong>From Date/Time</strong></label>
                                  <input type="datetime-local"  name="from_date" id="from_date" class="form-control">
                                </div>
                              </div>
                              <div class="col-lg-12 pt-2">
                                <div class="form-group">
                                  <label style="float: left;"><strong>To Date/Time</strong></label>
                                  <input type="datetime-local" name="to_date" id="to_date" class="form-control">
                                </div>
                              </div>
                              <div class="row pb-3" style="width: 50px;text-align: center;display: flex;flex-flow: row;">
                                <div class="col-lg-4 pt-2" style="padding-left: 0px;">
                                    <button class="btn btn-secondary" onclick="Get_Graph()" type="button">
                                      Genrate
                                    </button>
                                </div>
                                <div class="col-lg-4 pt-2" style="padding-left: 60px;">
                                    <button class="btn btn-info" onclick="graph_date_time()" type="button">
                                      <i class="fa-solid fa-arrows-rotate"></i>
                                    </button>
                                </div>
                              </div>
                            </div>
                        </div>

                        <div id="neutral_voltage" style="height: 400px; width: 100%;"></div>
                      </div>
                    </div> 

                  </div>
                </div>
              </div>
            </div>

            <div class="row gx-3">
              <div class="col-sm-12">
                <div class="accordion mb-3" id="alert_log_well_detailsAccordian">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="alertlogwelldetailsaccordians">
                      <button class="accordion-button" onclick="alert_log_mbl()" type="button" data-bs-toggle="collapse"
                        data-bs-target="#alert_log_details_accordians" aria-expanded="true"
                        aria-controls="alert_log_details_accordians">
                        <div class="name-tilte">
                          <h5 class="m-0">
                            Alert Log <span class="btn btn-sm well-count-head-1" id="alert_count"></span>
                          </h5>
                        </div>
                      </button>
                    </h2>
                    <div id="alert_log_details_accordians" class="accordion-collapse collapse"
                      aria-labelledby="alertlogwelldetailsaccordians" data-bs-parent="#alert_log_well_detailsAccordian">
                      <div class="accordion-body">

                        <div class="d-flex gap-2 device-pills a pt-3">
                          <table class="table table-responsive table-bordered" style="width: 100%;">
                            <thead>
                              <tr>
                                <th style="background-color: #dae4ed;">#</th>
                                <th style="background-color: #dae4ed;">Alert Type</th>
                                <th style="background-color: #dae4ed;">Alert Status</th>
                                <th style="background-color: #dae4ed;">Alert Date/Time</th>
                              </tr>
                            </thead>
                            <tbody id="alert_log_table">
                              
                            </tbody>
                          </table>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="row gx-3">
              <div class="col-sm-12">
                <div class="accordion mb-3" id="wellasset_gis_map_accordian">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="wellassetGIS_map_accordians">
                      <button class="accordion-button" onclick="initMap_mbl()" type="button" data-bs-toggle="collapse"
                        data-bs-target="#wellasset_gisMapAccordian" aria-expanded="true"
                        aria-controls="wellasset_gisMapAccordian">
                        <div class="name-tilte">
                          <h5 class="m-0">
                            Asset GIS Map
                          </h5>
                        </div>
                      </button>
                    </h2>
                    <div id="wellasset_gisMapAccordian" class="accordion-collapse collapse"
                      aria-labelledby="wellassetGIS_map_accordians" data-bs-parent="#wellasset_gis_map_accordian">
                      <div class="accordion-body">
                        <div class="d-flex gap-2 pt-3">
                          <div class="mt-2" id="mymap" style="width:100%;height: 400px;"></div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- Row ends -->

          </div>
          <!-- App body ends -->

          <div class="offcanvas offcanvas-end" tabindex="-1" id="update_ietcc" aria-labelledby="offcanvasRightLabel">
            <div class="offcanvas-header">
              <h5 id="offcanvasRightLabel">Update Controls of well <span class="badge rounded-pill bg-info">W-001</span></h5>
              <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>
            <div class="offcanvas-body">
              <div class="container">
                <form>
                  <div class="row">
                    <div class="col-md-12">
                      <div class="form-group">
                        <label><strong>On Time</strong></label>
                        <input type="number" name="on_time" id="on_time_" class="form-control" required placeholder="Enter on time">
                      </div>
                    </div>
                    <div class="col-md-12 pt-2">
                      <div class="form-group">
                        <label><strong>Off Time</strong></label>
                        <input type="number" name="off_time" id="off_time_" class="form-control" required placeholder="Enter off time">
                      </div>
                    </div>
                    <div class="col-md-12 pt-2">
                      <div class="form-group">
                        <label><strong>Target Time</strong></label>
                        <input type="time" name="target_time" id="target_time_" class="form-control" required>
                      </div>
                    </div>
                  </div>
                  <div class="submit-btns pt-3 text-center">
                    <button type="reset" class="btn btn-danger">Clear</button>
                    <button type="button" class="btn btn-success">Success</button>
                  </div>
                  <div class="control-details pt-3">
                    <table class="table table-responsive table-bordered">
                      <tbody>
                        <tr>
                          <th>Cycle Time : </th>
                          <td>00:10:00 </td>
                        </tr>
                        <tr>
                          <th>Target Time : </th>
                          <td>00:10:00 </td>
                        </tr>
                        <tr>
                          <th>Last Updated Time :</th>
                          <td>00:10:00 </td>
                        </tr>
                        <tr>
                          <th>User By : </th>
                          <td>XYZ</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </form>
              </div>
            </div>
          </div>

          <div class="offcanvas offcanvas-end" tabindex="-1" id="flag_well" aria-labelledby="offcanvasRightLabel">
            <div class="offcanvas-header">
              <h5 id="offcanvasRightLabel">Mark Well Status As Non Flowing Well <span class="badge rounded-pill bg-info">W-001</span></h5>
              <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>
            <div class="offcanvas-body">
              <div class="container">
                <form>
                  <div class="row">
                    <div class="col-md-12">
                      <div class="form-group">
                        <label><strong>Temporary Off Reason</strong></label>
                        <select class="form-control" name="reason" id="reason" required>
                          <option value="">-select-</option>
                          <option value="1"> SRP Unit not available</option>
                        </select>
                      </div>
                    </div>
                    <div class="col-md-12 pt-2">
                      <div class="form-group">
                        <label><strong>Effective Date Time</strong></label>
                        <input type="datetime-local" name="effective_date_time" id="effective_date_time" class="form-control" required>
                      </div>
                    </div>
                  </div>
                  <div class="submit-btns pt-3 text-center">
                    <button type="button" class="btn btn-success">Set Flag</button>
                  </div>
                  <div class="control-details pt-3">
                    <table class="table table-responsive table-bordered">
                      <tbody>
                        <tr>
                          <th>Last Updated : </th>
                          <td>00:10:00 </td>
                        </tr>
                        <tr>
                          <th>Update By : </th>
                          <td>dskjdk</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </form>
              </div>
            </div>
          </div>

          <!-- App footer starts -->
          <div class="app-footer bg-white">
            <span>© Copyright, Iotas Solutions Pvt Ltd, All Right Reserve. </span>
          </div>
          <!-- App footer ends -->

        </div>
        <!-- App container ends -->

      </div>
      <!-- Main container ends -->

    </div>
    <!-- Page wrapper ends -->

    <!-- *************
			************ JavaScript Files *************
		************* -->
    <!-- Required jQuery first, then Bootstrap Bundle JS -->
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/moment.min.js"></script>

    <!-- *************
			************ Vendor Js Files *************
		************* -->
    <script src="assets/local/select2/js/select2.min.js"></script>

    <script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>

    <!-- Overlay Scroll JS -->
    <script src="assets/vendor/overlay-scroll/jquery.overlayScrollbars.min.js"></script>
    <script src="assets/vendor/overlay-scroll/custom-scrollbar.js"></script>

    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBKoAgLoslTEUCNabLj5H5jLVdWFD2WhK8"></script>
    <!-- Custom JS files -->
    <script src="assets/js/custom.js"></script>
    <!-- <script src="inc/sidebarmenu.html"></script> -->
    <script type="text/javascript" src="inc/paths.js"></script>

    <script type="text/javascript">
      $(document).ready(function() 
      {
        $(".select2").select2();
      });

    </script>

    <script>
      let sessionwellSite = localStorage.getItem('setWellSiteId');
      let wellSiteata = JSON.parse(sessionwellSite);
      let session_well_id = wellSiteata.well_id;
      let session_site_id = wellSiteata.site_id;
      console.log("well_site",wellSiteata);


      let sessionUserData = localStorage.getItem('userData');
      let userData = JSON.parse(sessionUserData);

      $(document).ready(function() {
          let company_id = userData.company_id;
          let assets_id = userData.assets_id;
          // area list section
          $.ajax({
              url: api_path + "Area_master/AreaList",
              type: "POST",
              data:{company_id:company_id, assets_id:assets_id},
              headers: { 
                  "x-api-key": "Qm0Lkq9m8JRiGPxO56HNmD7pIVSGzJje"
              },
              success:(resp)=>{
                if(resp.response_code == 200){
                  $("#area_id").html(`<option value="">-select-</option>`);
                  $.each(resp.data, (i, v) => {
                      $("#area_id").append(`<option value="${v.id}">${v.area_name}</option>`);
                  });
                  get_url_well_id_moble();
                }
              }
          });


          // well type list section 
          $.ajax({
              url: api_path + "Master/get_well_type_List",
              type: "POST",
              data:{company_id:company_id},
              headers: { 
                  "x-api-key": "Qm0Lkq9m8JRiGPxO56HNmD7pIVSGzJje"
              },
              success:(resp)=>{
                if(resp.response_code == 200){
                  $("#well_type").html(`<option value="">-select-</option>`);
                  $.each(resp.data, (i,v)=>{
                      $("#well_type").append(`<option value="${v.id}">${v.well_type_name}</option>`);
                  });
                  get_url_well_id_moble();
                }
              }
          });
      });

      const getSiteList = ()=>{
        let company_id = userData.company_id;
        let assets_id = userData.assets_id;
        let area_id = $("#area_id").val();

        $.ajax({
            url: api_path + "Well_site_master/Well_SiteList",
            type: "POST",
            data: {company_id:company_id,assets_id:assets_id,area_id:area_id},
            headers: { 
                "x-api-key": "Qm0Lkq9m8JRiGPxO56HNmD7pIVSGzJje"
            },
            success:(resp)=>{
              if(resp.response_code == 200){
                $("#site_id").html(`<option value="">-select-</option>`);
                $.each(resp.data, (i, v) => {
                    let selected = v.id == session_site_id ? "selected" : "";
                    $("#site_id").append(
                        `<option value="${v.id}" ${selected}>${v.well_site_name}</option>`
                    );
                });
                $("#site_id").trigger("change");
              }
            }
        });
      }


      const get_url_well_id_moble = ()=>{
        $.ajax({
            url: api_path + "Area_Dashboard/Single_Device_Data",
            type: "POST",
            data:{
              well_id: session_well_id,
            },
            headers: { 
                "x-api-key": "Qm0Lkq9m8JRiGPxO56HNmD7pIVSGzJje"
            },
            success:(resp)=>{
              if(resp.response_code == 200){
                if(resp.data.length > 0){
                  const wellDetails = resp.data[0];
                  const areaIdToSelect = wellDetails.area_id;
                  const wellTypeIdToSelect = wellDetails.well_type;

                  $('#area_id').val(areaIdToSelect).trigger('change');
                  $('#well_type').val(wellTypeIdToSelect).trigger('change');
                }
              }
            }
        });
      }

      const getWellNames = ()=>{
        let company_id = userData.company_id;
        let assets_id = userData.assets_id;
        let area_id = $("#area_id").val();
        let site_id = $("#site_id").val();

        $.ajax({
            url: api_path + "Well_master/Well_List",
            type: "POST",
            data: {company_id:company_id,assets_id:assets_id,area_id:area_id,site_id:site_id,user_id: userData.user_member_id},
            headers: { 
                "x-api-key": "Qm0Lkq9m8JRiGPxO56HNmD7pIVSGzJje"
            },
            success:(resp)=>{
              if(resp.response_code == 200){
                $("#well_id").html(`<option value="">-select-</option>`);
                $.each(resp.data, (i,v)=>{
                    let selected = v.id == session_well_id ? "selected" : "";
                    $("#well_id").append(
                        `<option value="${v.id}" ${selected}>${v.well_name}</option>`
                    );
                });
              }
            }
        });

      }

      function updateHeadingFromDropdowns() {
          const area_name = $('#area_id option:selected').text();
          const well_type_name = $('#well_type option:selected').text();
          const well_name = $('#well_id option:selected').text();
          const well_site_name = $('#site_id option:selected').text();
         
          $('#areaName').text(area_name == "Select All" ? '' : area_name);
          $('#wellTypeName').text(well_type_name == "Select All" ? '' : well_type_name);
          $('#siteName').text(well_site_name == "Select All" ? '' : well_site_name);
          $('#wellName').text(well_name == "Select Well" ? '' : well_name);
      }

      $('#area_id, #site_id,#well_type, #well_id').on('change', function () {
          updateHeadingFromDropdowns();
          if (this.id !== 'well_id') getWellNames(); 
      });


      const get_single_well_details_mbl = ()=>{
          let well_id = $('#well_id').val();
          $.ajax({
              url: api_path + "Web_Single_Dashboard_Data/Well_Single_Dashboard_Details",
              type: "POST",
              data: {
                well_id: well_id,
              },
              headers: { 
                  "x-api-key": "Qm0Lkq9m8JRiGPxO56HNmD7pIVSGzJje"
              },
              success:(resp)=>{
                if(resp.response_code == 200){
                    if (resp.data.single_welldevice_data.length > 0) {
                      let deviceData = resp.data.single_welldevice_data[0];  
                      $('#device_name').text(deviceData.device_name || '');
                      $('#imei_no').text(deviceData.imei_no || '');
                      $('#imei_no_hdn').val(deviceData.imei_no || '');
                      $('#well_id_hdn').val(deviceData.well_id || '');
                      $('#well_name_hdn').text(deviceData.well_name || '');
                      $('#flag_status').text(deviceData.flag_status || '');
                      $('#wellidhdn').val(deviceData.well_id || '');
                      $('#wellnamehdn').text(deviceData.well_name || '');
                       
                       var flag_status_data = deviceData.flag_status;
                       // console.log(flag_status_data,'flag_status');
                        if(flag_status_data == 0)
                        {
                           $('#flag').show();
                           $('#unflag').hide();
                           $('#un_flag_by').hide();
                           $('#flag_by').show();
                                 
                        }else{
                            $('#unflag').show();
                            $('#flag').hide();
                            $('#un_flag_by').hide();
                            $('#flag_by').show();
                        }

                      $('#chp_image').text(deviceData.PS_2_CHP || 0);
                      $('#gip_image').text(deviceData.PS_1_GIP || 0);
                      $('#abp_image').text(deviceData.PS_4_ABP || 0);
                      $('#thp_image').text(deviceData.PS_3_THP || 0);
                      $('#tht_image').text(deviceData.FLTP_1_Temp || 0);

                      $('#on_time').text(deviceData.ON_Time || 0);
                      $('#off_time').text(deviceData.Off_Time || 0);
                      let last_cycle_time = deviceData.last_cycle != null ? moment(deviceData.last_cycle).format('DD-MM-YYYY HH:mm a') :" ";
                    $('#last_cycle').text(last_cycle_time);
                    let next_cycle_time = deviceData.next_cycle != null ? moment(deviceData.next_cycle).format('DD-MM-YYYY HH:mm a') :" ";
                    $('#next_cycle').text(next_cycle_time);

                      $('#bean_size').text(deviceData.bean_size || "W/B");
                    
                      $('#battery_voltage').text(deviceData.Battery_Voltage || 0);
                      $('#battery_value').text(deviceData.Battery_Voltage || 0);

                     var last_datetime = deviceData.Log_Date_Time != null ? moment(deviceData.Log_Date_Time).format('DD-MM-YYYY h:mm:ss a') :"NA";

                     $('#last_updated_datetime').text(last_datetime);
                    

                      
                      var last_updated_time = deviceData.Log_Date_Time;
                      var lastDataTimeObj = new Date(last_updated_time);
                      var currentDate = new Date();
                      var diffInMilliseconds = currentDate - lastDataTimeObj;
                      seconds = Math.floor(diffInMilliseconds / 1000);

                      if (seconds < 7200) 
                      {
                         $('#rtms_status_image').html('<img height="30" src="assets/images/small/greendot.png" alt="symbol-img">');
                         $('#rtms_status_text').text('ON');
                      } else {
                          $('#rtms_status_image').html('<img height="30" src="assets/images/small/reddot.png" alt="symbol-img">');
                          $('#rtms_status_text').text('OFF');
                      }

                      var flag_status = deviceData.flag_status;
                      if (seconds < 7200) {
                          if (flag_status == 0) {
                              $('#well_status').text('Flowing');
                            
                          } else if (flag_status == 1) {
                              $('#well_status').text('Non-Flowing');
                             
                          }
                      } else {
                          $('#well_status').text('Offline');
                         
                      }


                  function battery(charge) 
                  {
                      var activeBars = Math.floor(Math.min(Math.max((charge - 6.0) / (7.9 - 6.0) * 10, 0), 10)); 
                      $(".battery .bar").each(function(index) 
                      {
                          if (index < activeBars) 
                          {
                              $(this).addClass("active"); 
                          } else {
                             $(this).removeClass("active"); 
                          }
                      });
                  }

                  var battery_value = parseFloat(deviceData.Battery_Voltage); 
                    battery(battery_value); 


                  }
                }
              }
          });
      }

      const getPresureDetails = ()=>{
          let well_id = $('#well_id').val();
          $.ajax({
                url: api_path + "Web_Single_Dashboard_Data/Well_Single_Dashboard_Details",
                type: "POST",
                data: {well_id: well_id},
                headers: { 
                    "x-api-key": "Qm0Lkq9m8JRiGPxO56HNmD7pIVSGzJje"
                },
                success:(resp)=>{
                    if(resp.response_code == 200 && resp.data){
                      let pressureDailyAvg = resp.data.pressure_daily_avg || {};
                      // console.log("Pressure Daily Average Data:", pressureDailyAvg);
                      $('#chp_daily').text(pressureDailyAvg.avg_PS_2_CHP || 0);
                      $('#gip_daily').text(pressureDailyAvg.avg_PS_1_GIP || 0);
                      $('#abp_daily').text(pressureDailyAvg.avg_PS_4_ABP || 0);
                      $('#thp_daily').text(pressureDailyAvg.avg_PS_3_THP || 0);
                      $('#tht_daily').text(pressureDailyAvg.avg_FLTP_1_Temp || 0);
                     // console.log("THT Daily Value:", pressureDailyAvg.avg_FLTP_1_Temp);

                      // Bind monthly pressure data
                      let pressureMonthlyAvg = resp.data.pressure_monthly_avg || {};
                      $('#chp_monthly').text(pressureMonthlyAvg.avg_PS_2_CHP || 0);
                      $('#gip_monthly').text(pressureMonthlyAvg.avg_PS_1_GIP || 0);
                      $('#abp_monthly').text(pressureMonthlyAvg.avg_PS_4_ABP || 0);
                      $('#thp_monthly').text(pressureMonthlyAvg.avg_PS_3_THP || 0);
                      $('#tht_monthly').text(pressureMonthlyAvg.avg_FLTP_1_Temp || 0);
                    }
                }
          });
      }

      const graph_date_time = ()=>{
          const now = new Date();
          function formatDateToLocalInput(date) {
              const year = date.getFullYear();
              const month = String(date.getMonth() + 1).padStart(2, '0'); // Months are 0-based
              const day = String(date.getDate()).padStart(2, '0');
              const hours = String(date.getHours()).padStart(2, '0');
              const minutes = String(date.getMinutes()).padStart(2, '0');
              return `${year}-${month}-${day}T${hours}:${minutes}`;
          }
          const toDateValue = formatDateToLocalInput(now);
          const fromDateValue = formatDateToLocalInput(new Date(now.getTime() - 24 * 60 * 60 * 1000));
          document.getElementById('from_date').value = fromDateValue;
          document.getElementById('to_date').value = toDateValue;
      }

      const Get_Graph = ()=>{
          let selectedOption = "1";
          if(selectedOption == "1")
          {
            let well_id = $('#well_id').val();
            let from_date = $('#from_date').val();
            let to_date = $('#to_date').val();
            let graph_type = selectedOption;

            $.ajax({
                url: api_path + "Web_Single_Dashboard_Data/get_Alltype_Single_graphData",
                type: "POST",
                data: {
                  well_id:well_id,
                  from_date:from_date,
                  to_date:to_date,
                  graph_type:selectedOption
                },
                headers: { 
                    "x-api-key": "Qm0Lkq9m8JRiGPxO56HNmD7pIVSGzJje"
                },
                success:(resp)=>{
    
                  input_volt_l2n_r = resp.data.Output_pressure["output_chp"];
                  input_volt_l2n_y = resp.data.Output_pressure["output_gip"];
                  input_volt_l2n_b = resp.data.Output_pressure["output_thp"];
                  input_volt_l2n_avg = resp.data.Output_pressure["output_abp"];
                  input_volt_l2n_tht = resp.data.Output_pressure["output_tht"];
                  input_volt_l2n_battery = resp.data.Output_pressure["output_battery"];
                  limit_slice = resp.data.Output_pressure["output_chp"].length;
                  loadchart("neutral_voltage", " ", " CHP ", " GIP ", " THP  ", " ABP ", " THT ", " Battery Voltage", 0, 500);
                }
            });
          }
      }

      function loadchart(mychart, mytitle, name1, name2, name3, name4, name5, name6, minYVal, maxYVal) {
          var dataPoints1 = [];
          var dataPoints2 = [];
          var dataPoints3 = [];
          var dataPoints4 = [];
          var dataPoints5 = [];
          var dataPoints6 = [];

          // console.log('cvcsf',myvalue);

          var chart = new CanvasJS.Chart(mychart, {
              zoomEnabled: true,
              title: {
                  text: mytitle,
                  fontSize: 14,
              },
              axisX: {
                  //Try Changing to MMMM
                  valueFormatString: "DD-MM-YYYY HH:mm:ss",
                  labelFontSize: 9,
                  labelAutoFit: true,
                  labelAngle: 180,
              },
              axisY: {
                  prefix: " ",
                  labelFontSize: 9,
              },
              toolTip: {
                  shared: true,
              },
              legend: {
                  cursor: "pointer",
                  verticalAlign: "top",
                  fontSize: 16,
                  fontColor: "dimGrey",
                  itemclick: toggleDataSeries,
              },
              data: [
                  {
                      type: "line",
                      xValueType: "dateTime",
                      xValueFormatString: "DD-MM-YYYY HH:mm:ss",
                      showInLegend: true,
                      name: name1,
                      dataPoints: dataPoints1,
                      lineColor: "#3a1397",
                      legendMarkerColor: "#3a1397",
                      markerColor: "#3a1397",
                  },
                  {
                      type: "line",
                      xValueType: "dateTime",
                      xValueFormatString: "DD-MM-YYYY HH:mm:ss",
                      showInLegend: true,
                      name: name2,
                      dataPoints: dataPoints2,
                      lineColor: "#ec344c",
                      legendMarkerColor: "#ec344c",
                      markerColor: "#ec344c",
                  },
                  {
                      type: "line",
                      xValueType: "dateTime",
                      xValueFormatString: "DD-MM-YYYY HH:mm:ss",
                      showInLegend: true,
                      name: name3,
                      dataPoints: dataPoints3,
                      lineColor: "#b55705",
                      legendMarkerColor: "#b55705",
                      markerColor: "#b55705",
                  },
                  {
                      type: "line",
                      xValueType: "dateTime",
                      xValueFormatString: "DD-MM-YYYY HH:mm:ss",
                      showInLegend: true,
                      name: name4,
                      dataPoints: dataPoints4,
                      lineColor: "#3add58",
                      legendMarkerColor: "#3add58",
                      markerColor: "#3add58",
                  },

                  {
                      type: "line",
                      xValueType: "dateTime",
                      xValueFormatString: "DD-MM-YYYY HH:mm:ss",
                      showInLegend: true,
                      name: name5,
                      dataPoints: dataPoints5,
                      lineColor: "#c72c12b8",
                      legendMarkerColor: "#c72c12b8",
                      markerColor: "#c72c12b8",
                  },
                  {
                      type: "line",
                      xValueType: "dateTime",
                      xValueFormatString: "DD-MM-YYYY HH:mm:ss",
                      showInLegend: true,
                      name: name6,
                      dataPoints: dataPoints6,
                      lineColor: "#2786f1",
                      legendMarkerColor: "#2786f1",
                      markerColor: "#2786f1",
                  },
              ],
          });
          chart.options.data[0].visible = true;
          chart.options.data[1].visible = true;
          chart.options.data[2].visible = true;
          chart.options.data[3].visible = true;
          chart.options.data[4].visible = false;
          chart.options.data[5].visible = false;

          function toggleDataSeries(e) {
              if (typeof e.dataSeries.visible === "undefined" || e.dataSeries.visible) {
                  e.dataSeries.visible = false;
              } else {
                  e.dataSeries.visible = true;
              }
              chart.render();
          }

          var updateInterval = 1000;

          function updateChart() {
              for (var i = 0; i < input_volt_l2n_r.length; i++) {
                  var yValue1 = parseFloat(input_volt_l2n_r[i].y);
                  var yValue2 = parseFloat(input_volt_l2n_y[i].y);
                  var yValue3 = parseFloat(input_volt_l2n_b[i].y);
                  var yValue4 = parseFloat(input_volt_l2n_avg[i].y);
                  var yValue5 = parseFloat(input_volt_l2n_tht[i].y);
                  var yValue6 = parseFloat(input_volt_l2n_battery[i].y);

                  var xValue1 = new Date(input_volt_l2n_r[i].x).getTime();
                  var xValue2 = new Date(input_volt_l2n_y[i].x).getTime();
                  var xValue3 = new Date(input_volt_l2n_b[i].x).getTime();
                  var xValue4 = new Date(input_volt_l2n_avg[i].x).getTime();
                  var xValue5 = new Date(input_volt_l2n_tht[i].x).getTime();
                  var xValue6 = new Date(input_volt_l2n_battery[i].x).getTime();

                  var prevlnr = 0;
                  var nextlnr = 0;
                  var prevlny = 0;
                  var nextlny = 0;
                  var prevlnb = 0;
                  var nextlnb = 0;
                  var prevAvg = 0;
                  var nextAvg = 0;
                  var prevtht = 0;
                  var nexttht = 0;
                  var prevbattery = 0;
                  var nextbattery = 0;

                  if (i > 0) {
                      prevlnr = parseFloat(input_volt_l2n_r[i - 1].y);
                      prevlny = parseFloat(input_volt_l2n_y[i - 1].y);
                      prevlnb = parseFloat(input_volt_l2n_b[i - 1].y);
                      prevAvg = parseFloat(input_volt_l2n_avg[i - 1].y);
                      prevtht = parseFloat(input_volt_l2n_tht[i - 1].y);
                      prevbattery = parseFloat(input_volt_l2n_battery[i - 1].y);
                  }
                  if (i < input_volt_l2n_r.length - 1) {
                      nextlnr = parseFloat(input_volt_l2n_r[i + 1].y);
                      nextlny = parseFloat(input_volt_l2n_y[i + 1].y);
                      nextlnb = parseFloat(input_volt_l2n_b[i + 1].y);
                      nextAvg = parseFloat(input_volt_l2n_avg[i + 1].y);
                      nexttht = parseFloat(input_volt_l2n_tht[i + 1].y);
                      nextbattery = parseFloat(input_volt_l2n_battery[i + 1].y);
                  }
                  if (dataPoints1.length < limit_slice) {
                      if (!(prevlnr > 0 && parseFloat(input_volt_l2n_r[i].y) <= 0 && nextlnr > 0)) {
                          dataPoints1.push({
                              x: xValue1,
                              y: yValue1,
                          });
                      }
                      if (!(prevlny > 0 && parseFloat(input_volt_l2n_y[i].y) <= 0 && nextlny > 0)) {
                          dataPoints2.push({
                              x: xValue2,
                              y: yValue2,
                          });
                      }
                      if (!(prevlnb > 0 && parseFloat(input_volt_l2n_b[i].y) <= 0 && nextlnb > 0)) {
                          dataPoints3.push({
                              x: xValue3,
                              y: yValue3,
                          });
                      }
                      if (!(prevAvg > 0 && parseFloat(input_volt_l2n_avg[i].y) <= 0 && nextAvg > 0)) {
                          dataPoints4.push({
                              x: xValue4,
                              y: yValue4,
                          });
                      }
                      if (!(prevtht > 0 && parseFloat(input_volt_l2n_tht[i].y) <= 0 && nexttht > 0)) {
                          dataPoints5.push({
                              x: xValue5,
                              y: yValue5,
                          });
                      }

                      if (!(prevbattery > 0 && parseFloat(input_volt_l2n_battery[i].y) <= 0 && nextbattery > 0)) {
                          dataPoints6.push({
                              x: xValue6,
                              y: yValue6,
                          });
                      }
                  } else {
                      if (!(prevlnr > 0 && parseFloat(input_volt_l2n_r[i].y) <= 0 && nextlnr > 0)) {
                          dataPoints1.shift();
                          dataPoints1.push({
                              x: xValue1,
                              y: yValue1,
                          });
                      }
                      if (!(prevlny > 0 && parseFloat(input_volt_l2n_y[i].y) <= 0 && nextlny > 0)) {
                          dataPoints2.shift();
                          dataPoints2.push({
                              x: xValue2,
                              y: yValue2,
                          });
                      }
                      if (!(prevlnb > 0 && parseFloat(input_volt_l2n_b[i].y) <= 0 && nextlnb > 0)) {
                          dataPoints3.shift();
                          dataPoints3.push({
                              x: xValue3,
                              y: yValue3,
                          });
                      }
                      if (!(prevAvg > 0 && parseFloat(input_volt_l2n_avg[i].y) <= 0 && nextAvg > 0)) {
                          dataPoints4.shift();
                          dataPoints4.push({
                              x: xValue4,
                              y: yValue4,
                          });
                      }

                      if (!(prevtht > 0 && parseFloat(input_volt_l2n_tht[i].y) <= 0 && nexttht > 0)) {
                          dataPoints5.shift();
                          dataPoints5.push({
                              x: xValue5,
                              y: yValue5,
                          });
                      }

                      if (!(prevbattery > 0 && parseFloat(input_volt_l2n_battery[i].y) <= 0 && nextbattery > 0)) {
                          dataPoints6.shift();
                          dataPoints6.push({
                              x: xValue6,
                              y: yValue6,
                          });
                      }
                  }
              }
              chart.options.data[0].legendText = name1 + yValue1;
              chart.options.data[1].legendText = name2 + yValue2;
              chart.options.data[2].legendText = name3 + yValue3;
              chart.options.data[3].legendText = name4 + yValue4;
              chart.options.data[4].legendText = name5 + yValue5;
              chart.options.data[5].legendText = name6 + yValue6;
              chart.render();
          }
          updateChart();
          setInterval(function () {
              updateChart();
          }, updateInterval);
      }

      const alert_log_mbl = ()=>{
        let well_id = $('#well_id').val();
        $.ajax({
              url: api_path + "Web_Single_Dashboard_Data/Well_Single_Dashboard_Details",
              type: "POST",
              data: {
                  well_id: well_id,
              },
              headers: { 
                  "x-api-key": "Qm0Lkq9m8JRiGPxO56HNmD7pIVSGzJje"
              },
              success:(resp)=>{
                if(resp.response_code == 200){
                  $('#alert_count').html(resp.data.total_alert); 
                  $("#alert_log_table").html(``);
                  $.each(resp.data.well_alert_details, (i,v)=>{

                  var alert_data = '';
                  var alert_type = v.alert_type;
                  if (alert_type == 0) 
                  {
                      alert_data = 'SOV ON';
                  } else if (alert_type == 1) 
                  {
                      alert_data = 'SOV OFF';
                  } else if (alert_type == 2) 
                  {
                      alert_data = 'Battery Low';
                  } else if (alert_type == 3) 
                  {
                      alert_data = 'Battery High';
                  } else if (alert_type == 4) 
                  {
                      alert_data = 'GIP Low';
                  } else if (alert_type == 5) 
                  {
                      alert_data = 'GIP High';
                  } else if (alert_type == 6) 
                  {
                      alert_data = 'THP Low';
                  } else if (alert_type == 7) 
                  {
                      alert_data = 'THP High';
                  } else if (alert_type == 8) 
                  {
                      alert_data = 'CHP Low';
                  } else if (alert_type == 9) 
                  {
                      alert_data = 'CHP High';
                  } else if (alert_type == 10) 
                  {
                      alert_data = 'ABP Low';
                  } else if (alert_type == 11) 
                  {
                      alert_data = 'ABP High';
                  } else if (alert_type == 12) 
                  {
                      alert_data = 'Temp Low';
                  } else if (alert_type == 13) 
                  {
                      alert_data = 'Temp High';
                  } else {
                      alert_data = 'Unknown Alert Type';
                  }
                  let date = new Date(v.trip_datetime);
                  let formatedDatetime = `${date.getDate().toString().padStart(2, '0')}-${(date.getMonth() + 1).toString().padStart(2, '0')}-${date.getFullYear()} ${date.getHours().toString().padStart(2, '0')}:${date.getMinutes().toString().padStart(2, '0')}:${date.getSeconds().toString().padStart(2, '0')}`;
                  $("#alert_log_table").append(`<tr>
                              <td>${i + 1}</td>
                              <td>${alert_data}</td>
                              <td>${v.alert_details}</td>
                              <td>${formatedDatetime}</td>
                          </tr>`);
                  });
                }else{
                    $("#alert_log_table").html(`<tr><td colspan="4"> No alert log found! </td></tr>`);
                }
              }
        });
      }

      const initMap_mbl = ()=>{
          let area_id = $('#area_id').val();
          let well_id = $('#well_id').val();
          let well_type = $('#well_type').val();

          $.ajax({
                url: api_path + "Area_Dashboard/SiteList_for_Map",
                type: "POST",
                data: {
                  area_id: area_id,
                  well_id: well_id,
                  well_type: well_type
                },
                headers: { 
                    "x-api-key": "Qm0Lkq9m8JRiGPxO56HNmD7pIVSGzJje"
                },
                success:(resp)=>{
                  if(resp.response_code == 200){
                    if(resp.data.length > 0){
                      let markers = [];
                      let selectedWell = null; 

                      for (let item of resp.data) {
                          if (item.well_id === well_id) {
                              selectedWell = item;
                          }

                          markers.push({
                              position: { lat: parseFloat(item.lat), lng: parseFloat(item.long) },
                              title: item.well_name,
                              well_id: item.well_id,
                              offline_time: item.Log_Date_Time,
                              flag_status: item.flag_status,
                              long: item.long,
                              lat: item.lat
                          });
                      }
                      let mapCenter = { lat: 21.6316586, lng: 72.994056 };  // Default center
                      if (selectedWell) {
                          mapCenter = { lat: parseFloat(selectedWell.lat), lng: parseFloat(selectedWell.long) };
                      }

                      var map = new google.maps.Map(document.getElementById('mymap'), {
                          zoom: 13,
                          center: mapCenter
                      });

                      markers.forEach(function (marker) {
                          var markerIcon = {
                              url: 'assets/images/red.png', 
                              scaledSize: new google.maps.Size(20, 20)
                          };

                          var seconds = 200;

                          if (marker.offline_time) {
                              var lastDataTimeObj = new Date(marker.offline_time);
                              var currentDate = new Date();

                              var diffInMilliseconds = currentDate - lastDataTimeObj;
                              seconds = Math.floor(diffInMilliseconds / 1000);
                          }

                          if (!marker.offline_time || seconds > 7200) {
                              markerIcon.url = 'assets/images/red.png'; 
                          } else if (seconds <= 7200 && marker.flag_status == 0) {
                              markerIcon.url = 'assets/images/green.png'; 
                          } else if (seconds <= 7200 && marker.flag_status == 1) {
                              markerIcon.url = 'assets/images/red.png'; 
                          }

                          var mapMarker = new google.maps.Marker({
                              position: marker.position,
                              map: map,
                              icon: markerIcon,
                              title: marker.title,
                              lat: marker.lat,
                              long: marker.long
                          });

                          var statusText = '';
                          if (!marker.offline_time || seconds > 7200) {
                              statusText = 'Offline';
                          } else if (seconds <= 7200 && marker.flag_status == 0) {
                              statusText = 'Flowing';
                          } else if (seconds <= 7200 && marker.flag_status == 1) {
                              statusText = 'Non-Flowing';
                          }

                          var infowindow = new google.maps.InfoWindow({
                              content:
                                  '<div class="site-info" style="width: 150px; height: auto;">' +
                                  '<h6 style="color:black;"><a target="_blank" href="https://www.google.com/maps/place/' + marker.lat + ',' + marker.long + '" style="color:blue;">View on Google Maps</a></h6>' +
                                  '<h6>' + marker.title + '</h6>' +
                                  '<h6><b>Well Status</b>: ' + statusText + '</h6>' +
                                  '</div>'
                          });

                          mapMarker.addListener('click', function () {
                              infowindow.open(map, mapMarker);
                          });

                          // Close InfoWindow on map click
                          map.addListener('click', function () {
                              infowindow.close();
                          });
                      });
                    }
                  }
                }
          });
      }

      get_url_well_id_moble();
      $(document).ready(function () {
          setTimeout(() => {
              const wellId = $('#well_id').val();
              if (wellId) {
                  get_single_well_details_mbl();
                  getPresureDetails();
                  graph_date_time();
                  // Get_Graph();
                  // alert_log_mbl();
                  // initMap_mbl();
              } else {
                  console.warn("Well ID is still null after delay.");
              }
          }, 1000); 
      });
    </script>

  </body>


<!-- Mirrored from www.bootstrapget.com/demos/templatemonster/medicare-admin-dashboard/form-inputs.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 16 Sep 2024 17:59:06 GMT -->
</html>